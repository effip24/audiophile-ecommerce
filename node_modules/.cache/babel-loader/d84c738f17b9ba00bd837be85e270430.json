{"ast":null,"code":"var _jsxFileName = \"/Users/effiphil/Desktop/audiophile-ecommerce/src/components/App/App.js\",\n    _s = $RefreshSig$();\n\nimport \"./App.css\";\nimport { useEffect, useState } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport ScrollToTop from \"../ScrollToTop/ScrollToTop\";\nimport Header from \"../Header/Header\";\nimport Home from \"../Pages/Home/Home\";\nimport Headphones from \"../Pages/Headphones/Headphones\";\nimport Speakers from \"../Pages/Speakers/Speakers\";\nimport Earphones from \"../Pages/Earphones/Earphones\";\nimport Product from \"../Pages/Product/Product\";\nimport Checkout from \"../Pages/Checkout/Checkout\";\nimport CartModal from \"../CartModal/CartModal\";\nimport InfoToolTip from \"../InfoToolTip/InfoToolTip\";\nimport Footer from \"../Footer/Footer\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport productsData from \"../../utils/data.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [isCartModalOpen, setIsCartModalOpen] = useState(false);\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = useState(false);\n  const [headphones, setHeadphone] = useState([]);\n  const [speakers, setSpeakers] = useState([]);\n  const [earphones, setEarphones] = useState([]);\n  const [cart, setCart] = useState(JSON.parse(localStorage.getItem(\"cart\") || \"[]\"));\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [product, setProduct] = useState({});\n  const [order, setOrder] = useState({\n    orderInfo: {},\n    products: [],\n    total: 0,\n    shipping: 0,\n    grandTotal: 0\n  });\n  useEffect(() => {\n    setHeadphone(productsData.filter(product => product.category === \"headphones\").reverse());\n    setSpeakers(productsData.filter(product => product.category === \"speakers\").reverse());\n    setEarphones(productsData.filter(product => product.category === \"earphones\").reverse());\n    calculateTotalPrice();\n  }, []); // listeners for cart modal closing\n\n  useEffect(() => {\n    const closeByEscape = e => {\n      if (e.key === \"Escape\") {\n        setIsCartModalOpen(false);\n      }\n    };\n\n    const closeByClick = evt => {\n      if (!evt.target.classList.contains(\"cart-modal__container\") && evt.target.classList.contains(\"cart-modal\")) {\n        setIsCartModalOpen(false);\n      }\n    };\n\n    document.addEventListener(\"keydown\", closeByEscape);\n    document.addEventListener(\"click\", closeByClick);\n    return () => {\n      document.removeEventListener(\"keydown\", closeByEscape);\n      document.removeEventListener(\"click\", closeByClick);\n    };\n  }, []);\n\n  const handleProductClick = product => {\n    setProduct(product);\n  };\n\n  const handleCartClick = () => {\n    setIsCartModalOpen(!isCartModalOpen);\n  };\n\n  const handleAddToCart = product => {\n    if (cart.every(p => p.name !== product.name)) {\n      cart.unshift(product);\n    } else {\n      cart.map(p => {\n        if (p.name === product.name) {\n          p.total += product.total;\n          p.amount += product.amount;\n        }\n\n        return p;\n      });\n    }\n\n    calculateTotalPrice();\n    saveToLocalCart();\n  };\n\n  const handleCartUpdate = product => {\n    cart.map(p => {\n      if (p.name === product.name) {\n        p.amount = product.amount;\n        p.total = product.amount * p.price;\n      }\n\n      return p;\n    });\n    calculateTotalPrice();\n    saveToLocalCart();\n  };\n\n  const handleRemoveFromCart = product => {\n    console.log(product);\n    setCart(cart.filter(p => p.id !== product.name));\n    calculateTotalPrice();\n    saveToLocalCart();\n  };\n\n  const handleClearCart = () => {\n    setCart([]);\n    setTotalPrice(0);\n    localStorage.setItem(\"cart\", JSON.stringify([]));\n  };\n\n  const calculateTotalPrice = () => {\n    let sum = 0;\n    cart.forEach(p => sum += p.total);\n    setTotalPrice(sum);\n  };\n\n  const saveToLocalCart = () => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  };\n\n  const handlePayment = order => {\n    setOrder(order);\n    setIsInfoToolTipOpen(true);\n    handleClearCart();\n  };\n\n  const closeAllModals = () => {\n    setIsCartModalOpen(false);\n    setIsInfoToolTipOpen(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      onCartClick: handleCartClick,\n      cartItems: cart.length\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ScrollToTop, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/headphones\",\n          children: /*#__PURE__*/_jsxDEV(Headphones, {\n            headphones: headphones,\n            onPorductClick: handleProductClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/speakers\",\n          children: /*#__PURE__*/_jsxDEV(Speakers, {\n            speakers: speakers,\n            onPorductClick: handleProductClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/earphones\",\n          children: /*#__PURE__*/_jsxDEV(Earphones, {\n            earphones: earphones,\n            onPorductClick: handleProductClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/product\",\n          product: product,\n          children: /*#__PURE__*/_jsxDEV(Product, {\n            product: product,\n            onAddToCart: handleAddToCart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/checkout\",\n          children: /*#__PURE__*/_jsxDEV(Checkout, {\n            cart: cart,\n            totalPrice: totalPrice,\n            onPayment: handlePayment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CartModal, {\n      isOpen: isCartModalOpen,\n      cart: cart,\n      totalPrice: totalPrice,\n      onCartUpdate: handleCartUpdate,\n      onRemove: handleRemoveFromCart,\n      onClear: handleClearCart,\n      onCheckout: closeAllModals\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InfoToolTip, {\n      isOpen: isInfoToolTipOpen,\n      order: order,\n      onBack: closeAllModals\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"fLb/TsmjnMC9GeaEGRtFr1+O40s=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/effiphil/Desktop/audiophile-ecommerce/src/components/App/App.js"],"names":["useEffect","useState","Switch","Route","ScrollToTop","Header","Home","Headphones","Speakers","Earphones","Product","Checkout","CartModal","InfoToolTip","Footer","ProtectedRoute","productsData","App","isCartModalOpen","setIsCartModalOpen","isInfoToolTipOpen","setIsInfoToolTipOpen","headphones","setHeadphone","speakers","setSpeakers","earphones","setEarphones","cart","setCart","JSON","parse","localStorage","getItem","totalPrice","setTotalPrice","product","setProduct","order","setOrder","orderInfo","products","total","shipping","grandTotal","filter","category","reverse","calculateTotalPrice","closeByEscape","e","key","closeByClick","evt","target","classList","contains","document","addEventListener","removeEventListener","handleProductClick","handleCartClick","handleAddToCart","every","p","name","unshift","map","amount","saveToLocalCart","handleCartUpdate","price","handleRemoveFromCart","console","log","id","handleClearCart","setItem","stringify","sum","forEach","handlePayment","closeAllModals","length"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport { useEffect, useState } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport ScrollToTop from \"../ScrollToTop/ScrollToTop\";\n\nimport Header from \"../Header/Header\";\nimport Home from \"../Pages/Home/Home\";\nimport Headphones from \"../Pages/Headphones/Headphones\";\nimport Speakers from \"../Pages/Speakers/Speakers\";\nimport Earphones from \"../Pages/Earphones/Earphones\";\nimport Product from \"../Pages/Product/Product\";\nimport Checkout from \"../Pages/Checkout/Checkout\";\nimport CartModal from \"../CartModal/CartModal\";\nimport InfoToolTip from \"../InfoToolTip/InfoToolTip\";\nimport Footer from \"../Footer/Footer\";\n\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport productsData from \"../../utils/data.json\";\n\nfunction App() {\n  const [isCartModalOpen, setIsCartModalOpen] = useState(false);\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = useState(false);\n\n  const [headphones, setHeadphone] = useState([]);\n  const [speakers, setSpeakers] = useState([]);\n  const [earphones, setEarphones] = useState([]);\n  const [cart, setCart] = useState(\n    JSON.parse(localStorage.getItem(\"cart\") || \"[]\")\n  );\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  const [product, setProduct] = useState({});\n\n  const [order, setOrder] = useState({\n    orderInfo: {},\n    products: [],\n    total: 0,\n    shipping: 0,\n    grandTotal: 0,\n  });\n\n  useEffect(() => {\n    setHeadphone(\n      productsData\n        .filter((product) => product.category === \"headphones\")\n        .reverse()\n    );\n\n    setSpeakers(\n      productsData\n        .filter((product) => product.category === \"speakers\")\n        .reverse()\n    );\n\n    setEarphones(\n      productsData\n        .filter((product) => product.category === \"earphones\")\n        .reverse()\n    );\n\n    calculateTotalPrice();\n  }, []);\n\n  // listeners for cart modal closing\n  useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === \"Escape\") {\n        setIsCartModalOpen(false);\n      }\n    };\n\n    const closeByClick = (evt) => {\n      if (\n        !evt.target.classList.contains(\"cart-modal__container\") &&\n        evt.target.classList.contains(\"cart-modal\")\n      ) {\n        setIsCartModalOpen(false);\n      }\n    };\n\n    document.addEventListener(\"keydown\", closeByEscape);\n    document.addEventListener(\"click\", closeByClick);\n\n    return () => {\n      document.removeEventListener(\"keydown\", closeByEscape);\n      document.removeEventListener(\"click\", closeByClick);\n    };\n  }, []);\n\n  const handleProductClick = (product) => {\n    setProduct(product);\n  };\n\n  const handleCartClick = () => {\n    setIsCartModalOpen(!isCartModalOpen);\n  };\n\n  const handleAddToCart = (product) => {\n    if (cart.every((p) => p.name !== product.name)) {\n      cart.unshift(product);\n    } else {\n      cart.map((p) => {\n        if (p.name === product.name) {\n          p.total += product.total;\n          p.amount += product.amount;\n        }\n        return p;\n      });\n    }\n    calculateTotalPrice();\n    saveToLocalCart();\n  };\n\n  const handleCartUpdate = (product) => {\n    cart.map((p) => {\n      if (p.name === product.name) {\n        p.amount = product.amount;\n        p.total = product.amount * p.price;\n      }\n      return p;\n    });\n    calculateTotalPrice();\n    saveToLocalCart();\n  };\n\n  const handleRemoveFromCart = (product) => {\n    console.log(product);\n    setCart(cart.filter((p) => p.id !== product.name));\n    calculateTotalPrice();\n    saveToLocalCart();\n  };\n\n  const handleClearCart = () => {\n    setCart([]);\n    setTotalPrice(0);\n    localStorage.setItem(\"cart\", JSON.stringify([]));\n  };\n\n  const calculateTotalPrice = () => {\n    let sum = 0;\n    cart.forEach((p) => (sum += p.total));\n    setTotalPrice(sum);\n  };\n\n  const saveToLocalCart = () => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  };\n\n  const handlePayment = (order) => {\n    setOrder(order);\n    setIsInfoToolTipOpen(true);\n    handleClearCart();\n  };\n\n  const closeAllModals = () => {\n    setIsCartModalOpen(false);\n    setIsInfoToolTipOpen(false);\n  };\n\n  return (\n    <div className=\"App\">\n      <Header onCartClick={handleCartClick} cartItems={cart.length} />\n\n      <ScrollToTop>\n        <Switch>\n          <Route exact path={\"/\"}>\n            <Home />\n          </Route>\n\n          <Route path={\"/headphones\"}>\n            <Headphones\n              headphones={headphones}\n              onPorductClick={handleProductClick}\n            />\n          </Route>\n\n          <Route path={\"/speakers\"}>\n            <Speakers speakers={speakers} onPorductClick={handleProductClick} />\n          </Route>\n\n          <Route path={\"/earphones\"}>\n            <Earphones\n              earphones={earphones}\n              onPorductClick={handleProductClick}\n            />\n          </Route>\n\n          <ProtectedRoute path=\"/product\" product={product}>\n            <Product product={product} onAddToCart={handleAddToCart} />\n          </ProtectedRoute>\n\n          <Route path={\"/checkout\"}>\n            <Checkout\n              cart={cart}\n              totalPrice={totalPrice}\n              onPayment={handlePayment}\n            />\n          </Route>\n        </Switch>\n      </ScrollToTop>\n\n      <CartModal\n        isOpen={isCartModalOpen}\n        cart={cart}\n        totalPrice={totalPrice}\n        onCartUpdate={handleCartUpdate}\n        onRemove={handleRemoveFromCart}\n        onClear={handleClearCart}\n        onCheckout={closeAllModals}\n      />\n\n      <InfoToolTip\n        isOpen={isInfoToolTipOpen}\n        order={order}\n        onBack={closeAllModals}\n      />\n\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}